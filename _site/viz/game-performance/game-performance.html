<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Andrew Weatherman">
<meta name="dcterms.date" content="2024-05-19">
<meta name="description" content="Four Factor team performance tables">
<title>Andrew Weatherman - Team Game Performance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="../../scss/styles.css">
<link rel="stylesheet" href="../quarto_styles.css">
<meta property="og:title" content="Andrew Weatherman - Team Game Performance">
<meta property="og:description" content="Four Factor team performance tables">
<meta property="og:site_name" content="Andrew Weatherman">
<meta name="twitter:title" content="Andrew Weatherman - Team Game Performance">
<meta name="twitter:description" content="Four Factor team performance tables">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Andrew Weatherman</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../r-resources/index.html"> 
<span class="menu-text">R Resources</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-code" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Code</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-code">
<li>
    <a class="dropdown-item" href="../../viz/index.html">
 <span class="dropdown-text">Visualizations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../other-code/index.html">
 <span class="dropdown-text">Other Stuff</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../gt-theme-gallery/index.html">
 <span class="dropdown-text">gt Theme Gallery</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-my-work" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">My Work</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-my-work">
<li>
    <a class="dropdown-item" href="https://cbbdata.aweatherman.com">
 <span class="dropdown-text">cbbdata</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://cbbplotr.aweatherman.com">
 <span class="dropdown-text">cbbplotR</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../spotify/index.html"> 
<span class="menu-text">Music</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.aweatherman.com/"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/andreweatherman"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-github">
<li>
    <a class="dropdown-item" href="https://github.com/andreweatherman/viz-site">
 <span class="dropdown-text">Source Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/andreweatherman/viz-site/issues">
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Team Game Performance</h1>
  <div class="quarto-categories">
    <div class="quarto-category">gt</div>
    <div class="quarto-category">college basketball</div>
    <div class="quarto-category">cbbdata</div>
    <div class="quarto-category">tutorial</div>
  </div>
  </div>

<div>
  <div class="description">
    Four Factor team performance tables
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andrew Weatherman </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 19, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header><section id="the-what" class="level1"><h1>The What</h1>
<p>We will be creating a neat game performance table, highlighting team-wide four factors on a game-by-game basis. For brevity, I’m only going to plot conference games, but you can plot whichever subset of games that you’d like.</p>
<details><summary>
What we will be creating
</summary><div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="team_performance.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p></p>
</details></section><section id="the-how" class="level1"><h1>The How</h1>
<p>For this visualization, we will need:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://cbbdata.aweatherman.com/">cbbdata</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/andreweatherman/cbbplotR">cbbplotR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidyverse/glue">glue</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/jthomasmock/gtExtras">gtExtras</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This visualization uses data from <a href="https://cbbdata.aweatherman.com/"><code>cbbdata</code></a>}. If you have not yet installed the package and created an account,&nbsp;<a href="https://cbbdata.aweatherman.com/#installation">follow the steps outlined here</a>.</p>
<p>The process needed to grab our data involves using a few&nbsp;<em>joins</em>, so to simplify the process, we will walk through each “segment” individually. The full source code, included at the bottom of this post, will be more concise.</p>
<section id="the-data" class="level2"><h2 class="anchored" data-anchor-id="the-data">The Data</h2>
<section id="game-stats-and-net" class="level3"><h3 class="anchored" data-anchor-id="game-stats-and-net">Game Stats and NET</h3>
<p>The most important piece of our table, evidently, is game data. We are plotting “Four Factors,” which is a group of statistics defined by Dean Oliver as integral to winning basketball games. It’s a decades-old concept that has held true against the test of time. Using <code>cbbdata</code>, we can quickly get these data on a per-game level (caveat: D-1 vs.&nbsp;D-1 games only).</p>
<p>We also want to include the score of the game, and we can use the `glue package to build the score by concatenate two columns. We are also going to adjust our game date to be more readable.</p>
<p>Finally, we want to include NET rankings and quadrant boundaries. As hinted earlier, the new update to <code>cbbdata</code> includes a function to do this for us. If you are not familiar with the NET or quadrants, you can learn more here.</p>
<p>Since we are plotting Duke’s performance, we only need to request the Blue Devils’ game results. If you wish to plot another team (or year), remember to switch out all instances of Duke for your own team (or year). The process is the same.</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">factors_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cbbdata/man/cbd_torvik_game_stats.html">cbd_torvik_game_stats</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2024</span>, team <span class="op">=</span> <span class="st">'Duke'</span>, type <span class="op">=</span> <span class="st">'conf'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/cbbdata/man/cbd_add_net_quad.html">cbd_add_net_quad</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>score <span class="op">=</span> <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">'{pts_scored}-{pts_allowed}'</span><span class="op">)</span>,</span>
<span>           date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">'%b. %e'</span><span class="op">)</span><span class="op">)</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">result</span>, <span class="va">opp</span>, <span class="va">score</span>, <span class="va">off_ppp</span>, <span class="va">off_efg</span>,</span>
<span>           <span class="va">off_to</span>, <span class="va">off_or</span>, <span class="va">off_ftr</span>, <span class="va">def_ppp</span>, <span class="va">def_efg</span>, <span class="va">def_to</span>,</span>
<span>           <span class="va">def_or</span>, <span class="va">def_ftr</span>, <span class="va">game_score</span>, <span class="va">net</span>, <span class="va">quad</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 2%">
<col style="width: 8%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">result</th>
<th style="text-align: left;">opp</th>
<th style="text-align: left;">score</th>
<th style="text-align: right;">off_ppp</th>
<th style="text-align: right;">off_efg</th>
<th style="text-align: right;">off_to</th>
<th style="text-align: right;">off_or</th>
<th style="text-align: right;">off_ftr</th>
<th style="text-align: right;">def_ppp</th>
<th style="text-align: right;">def_efg</th>
<th style="text-align: right;">def_to</th>
<th style="text-align: right;">def_or</th>
<th style="text-align: right;">def_ftr</th>
<th style="text-align: right;">game_score</th>
<th style="text-align: right;">net</th>
<th style="text-align: left;">quad</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dec.&nbsp;2</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">Georgia Tech</td>
<td style="text-align: left;">68-72</td>
<td style="text-align: right;">104.9</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">9.3</td>
<td style="text-align: right;">32.5</td>
<td style="text-align: right;">32.3</td>
<td style="text-align: right;">111.0</td>
<td style="text-align: right;">57.5</td>
<td style="text-align: right;">18.5</td>
<td style="text-align: right;">23.1</td>
<td style="text-align: right;">24.5</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Quadrant 2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jan.&nbsp;2</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">Syracuse</td>
<td style="text-align: left;">86-66</td>
<td style="text-align: right;">116.5</td>
<td style="text-align: right;">59.3</td>
<td style="text-align: right;">14.9</td>
<td style="text-align: right;">16.7</td>
<td style="text-align: right;">30.5</td>
<td style="text-align: right;">89.4</td>
<td style="text-align: right;">47.3</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">30.9</td>
<td style="text-align: right;">95.6</td>
<td style="text-align: right;">84</td>
<td style="text-align: left;">Quadrant 3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Jan.&nbsp;6</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">Notre Dame</td>
<td style="text-align: left;">67-59</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: right;">42.4</td>
<td style="text-align: right;">15.8</td>
<td style="text-align: right;">24.4</td>
<td style="text-align: right;">35.6</td>
<td style="text-align: right;">84.5</td>
<td style="text-align: right;">43.2</td>
<td style="text-align: right;">20.1</td>
<td style="text-align: right;">26.8</td>
<td style="text-align: right;">27.1</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">124</td>
<td style="text-align: left;">Quadrant 2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jan.&nbsp;9</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">Pittsburgh</td>
<td style="text-align: left;">75-53</td>
<td style="text-align: right;">123.4</td>
<td style="text-align: right;">61.6</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">46.4</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">87.2</td>
<td style="text-align: right;">40.5</td>
<td style="text-align: right;">16.4</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">12.1</td>
<td style="text-align: right;">99.9</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">Quadrant 1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Jan.&nbsp;13</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">Georgia Tech</td>
<td style="text-align: left;">84-79</td>
<td style="text-align: right;">120.9</td>
<td style="text-align: right;">50.8</td>
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">44.4</td>
<td style="text-align: right;">113.7</td>
<td style="text-align: right;">64.5</td>
<td style="text-align: right;">20.1</td>
<td style="text-align: right;">19.2</td>
<td style="text-align: right;">21.8</td>
<td style="text-align: right;">66.0</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Quadrant 3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jan.&nbsp;20</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">Pittsburgh</td>
<td style="text-align: left;">76-80</td>
<td style="text-align: right;">111.0</td>
<td style="text-align: right;">56.1</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">14.8</td>
<td style="text-align: right;">57.1</td>
<td style="text-align: right;">116.9</td>
<td style="text-align: right;">59.3</td>
<td style="text-align: right;">14.6</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">27.1</td>
<td style="text-align: right;">69.4</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">Quadrant 2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="relative-performance" class="level3"><h3 class="anchored" data-anchor-id="relative-performance">Relative Performance</h3>
<p>Barttorvik includes a neat stat called Game Score. Game score can be thought of as a composite look at how well your team played in a given game. In a nutshell, game score is a per-game Barthag rating, which — while typically viewed across the aggregate where it down-weights mismatches — is an estimation of a team’s winning chances vs.&nbsp;the average team on a neutral floor. Game score is judged on a [0, 100] scale and is positive (scores closer to 100 are better).</p>
<p>With this information, we can create a data column that says, “In this game, my team played similar to how the T-Rank #X team would be expected to play against the same opponent.” Another appropriate interpretation would be a quick view of team consistency; this can be judged by looking at both the game_score column and our new one. Obviously, game score is pretty volatile at a per-game level, but it’s still nice to look at.</p>
<p>To do this, we need to create a function that pulls the closest current national ranking that corresponds to that game score.</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">find_closest_rank</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">scores</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map_int</a></span><span class="op">(</span><span class="va">scores</span>, <span class="kw">function</span><span class="op">(</span><span class="va">score</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">differences</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">ratings</span><span class="op">$</span><span class="va">barthag</span> <span class="op">-</span> <span class="va">score</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span></span>
<span>    <span class="va">closest_index</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.min.html">which.min</a></span><span class="op">(</span><span class="va">differences</span><span class="op">)</span></span>
<span>    <span class="va">ratings</span><span class="op">$</span><span class="va">barthag_rk</span><span class="op">[</span><span class="va">closest_index</span><span class="op">]</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">ratings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cbbdata/man/cbd_torvik_ratings.html">cbd_torvik_ratings</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2024</span><span class="op">)</span> <span class="co"># get current rankings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, we can apply it to our data</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">factors_net</span> <span class="op">&lt;-</span> <span class="va">factors_net</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>closest_rank <span class="op">=</span> <span class="fu">find_closest_rank</span><span class="op">(</span><span class="va">game_score</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="kenpom-rankings" class="level3"><h3 class="anchored" data-anchor-id="kenpom-rankings">KenPom Rankings</h3>
<p>Finally, we want to include KenPom rankings in our table.</p>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">current_kp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/cbbdata/man/cbd_kenpom_ratings.html">cbd_kenpom_ratings</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2024</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>opp <span class="op">=</span> <span class="va">team</span>, rank <span class="op">=</span> <span class="va">rk</span><span class="op">)</span></span>
<span></span>
<span><span class="va">factors_net</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">factors_net</span>, <span class="va">current_kp</span>, by <span class="op">=</span> <span class="st">'opp'</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="plotting" class="level2"><h2 class="anchored" data-anchor-id="plotting">Plotting</h2>
<p>Our table will use a few functions from {cbbplotR} to aid in creating our table. Here is a quick overview of each.</p>
<section id="adding-opponent-logos" class="level3"><h3 class="anchored" data-anchor-id="adding-opponent-logos">Adding opponent logos</h3>
<p>Our table includes logos of each Duke opponent, which is a nice way of quickly identifying any game of interest. This process involves mashing together some HTML, but <code>cbbplotR</code> includes a function called <code>gt_cbb_teams</code> that will do this for us!</p>
<p>Our table will have some dark fill colors for wins and losses, so let’s use dark mode logos for our opponents. By default, <code>gt_cbb_teams</code> pulls normal logos, but you can set <code>logo_color = “dark”</code> to get dark ones.</p>
<p>We also want to include the KenPom rank of each opponent, but we need to add it after we have called <code>gt_cbb_teams</code>. Then, let’s create a new frame called table_data.</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">table_data</span> <span class="op">&lt;-</span> <span class="va">factors_net</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="co"># we want to add HTML in the opp col. and rewrite it -&gt; so: opp, opp</span></span>
<span>  <span class="fu"><a href="https://andreweatherman.github.io/cbbplotR/reference/gt_cbb_teams.html">gt_cbb_teams</a></span><span class="op">(</span><span class="va">opp</span>, <span class="va">opp</span>, logo_color <span class="op">=</span> <span class="st">'dark'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>opp <span class="op">=</span> <span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">'{opp} (#{rank})'</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="kable-table">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 50%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 1%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 1%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">date</th>
<th style="text-align: left;">result</th>
<th style="text-align: left;">opp</th>
<th style="text-align: left;">score</th>
<th style="text-align: right;">off_ppp</th>
<th style="text-align: right;">off_efg</th>
<th style="text-align: right;">off_to</th>
<th style="text-align: right;">off_or</th>
<th style="text-align: right;">off_ftr</th>
<th style="text-align: right;">def_ppp</th>
<th style="text-align: right;">def_efg</th>
<th style="text-align: right;">def_to</th>
<th style="text-align: right;">def_or</th>
<th style="text-align: right;">def_ftr</th>
<th style="text-align: right;">game_score</th>
<th style="text-align: right;">net</th>
<th style="text-align: left;">quad</th>
<th style="text-align: right;">closest_rank</th>
<th style="text-align: right;">rank</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Dec.&nbsp;2</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">
<img src="https://a.espncdn.com/i/teamlogos/ncaa/500-dark/59.png" style="height: 25px; width: auto; vertical-align: -30%;"> Georgia Tech (#123)</td>
<td style="text-align: left;">68-72</td>
<td style="text-align: right;">104.9</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">9.3</td>
<td style="text-align: right;">32.5</td>
<td style="text-align: right;">32.3</td>
<td style="text-align: right;">111.0</td>
<td style="text-align: right;">57.5</td>
<td style="text-align: right;">18.5</td>
<td style="text-align: right;">23.1</td>
<td style="text-align: right;">24.5</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Quadrant 2</td>
<td style="text-align: right;">183</td>
<td style="text-align: right;">123</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jan.&nbsp;2</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">
<img src="https://a.espncdn.com/i/teamlogos/ncaa/500-dark/183.png" style="height: 25px; width: auto; vertical-align: -30%;"> Syracuse (#80)</td>
<td style="text-align: left;">86-66</td>
<td style="text-align: right;">116.5</td>
<td style="text-align: right;">59.3</td>
<td style="text-align: right;">14.9</td>
<td style="text-align: right;">16.7</td>
<td style="text-align: right;">30.5</td>
<td style="text-align: right;">89.4</td>
<td style="text-align: right;">47.3</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">30.9</td>
<td style="text-align: right;">95.6</td>
<td style="text-align: right;">84</td>
<td style="text-align: left;">Quadrant 3</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Jan.&nbsp;6</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">
<img src="https://a.espncdn.com/i/teamlogos/ncaa/500-dark/87.png" style="height: 25px; width: auto; vertical-align: -30%;"> Notre Dame (#118)</td>
<td style="text-align: left;">67-59</td>
<td style="text-align: right;">96.0</td>
<td style="text-align: right;">42.4</td>
<td style="text-align: right;">15.8</td>
<td style="text-align: right;">24.4</td>
<td style="text-align: right;">35.6</td>
<td style="text-align: right;">84.5</td>
<td style="text-align: right;">43.2</td>
<td style="text-align: right;">20.1</td>
<td style="text-align: right;">26.8</td>
<td style="text-align: right;">27.1</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">124</td>
<td style="text-align: left;">Quadrant 2</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">118</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jan.&nbsp;9</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">
<img src="https://a.espncdn.com/i/teamlogos/ncaa/500-dark/221.png" style="height: 25px; width: auto; vertical-align: -30%;"> Pittsburgh (#33)</td>
<td style="text-align: left;">75-53</td>
<td style="text-align: right;">123.4</td>
<td style="text-align: right;">61.6</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">46.4</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">87.2</td>
<td style="text-align: right;">40.5</td>
<td style="text-align: right;">16.4</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">12.1</td>
<td style="text-align: right;">99.9</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">Quadrant 1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Jan.&nbsp;13</td>
<td style="text-align: left;">W</td>
<td style="text-align: left;">
<img src="https://a.espncdn.com/i/teamlogos/ncaa/500-dark/59.png" style="height: 25px; width: auto; vertical-align: -30%;"> Georgia Tech (#123)</td>
<td style="text-align: left;">84-79</td>
<td style="text-align: right;">120.9</td>
<td style="text-align: right;">50.8</td>
<td style="text-align: right;">5.8</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">44.4</td>
<td style="text-align: right;">113.7</td>
<td style="text-align: right;">64.5</td>
<td style="text-align: right;">20.1</td>
<td style="text-align: right;">19.2</td>
<td style="text-align: right;">21.8</td>
<td style="text-align: right;">66.0</td>
<td style="text-align: right;">127</td>
<td style="text-align: left;">Quadrant 3</td>
<td style="text-align: right;">111</td>
<td style="text-align: right;">123</td>
</tr>
<tr class="even">
<td style="text-align: left;">Jan.&nbsp;20</td>
<td style="text-align: left;">L</td>
<td style="text-align: left;">
<img src="https://a.espncdn.com/i/teamlogos/ncaa/500-dark/221.png" style="height: 25px; width: auto; vertical-align: -30%;"> Pittsburgh (#33)</td>
<td style="text-align: left;">76-80</td>
<td style="text-align: right;">111.0</td>
<td style="text-align: right;">56.1</td>
<td style="text-align: right;">16.1</td>
<td style="text-align: right;">14.8</td>
<td style="text-align: right;">57.1</td>
<td style="text-align: right;">116.9</td>
<td style="text-align: right;">59.3</td>
<td style="text-align: right;">14.6</td>
<td style="text-align: right;">30.0</td>
<td style="text-align: right;">27.1</td>
<td style="text-align: right;">69.4</td>
<td style="text-align: right;">40</td>
<td style="text-align: left;">Quadrant 2</td>
<td style="text-align: right;">100</td>
<td style="text-align: right;">33</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="creating-the-title" class="level3"><h3 class="anchored" data-anchor-id="creating-the-title">Creating the title</h3>
<p>If you notice, our table header is pretty cool. It includes Duke’s logo, which is a nice way of quickly identifying the subject of our data. Making a header like this includes tinkering with some HTML — but luckily, <code>cbbplotR</code> ships with a function that will build the header for us! More specifically, it will allow us to include a team logo, conference logo, player headshot, or a custom image by passing through an external link. As you’ll see later in the code, we will eventually need to wrap this object in HTML.</p>
<p>To include a logo for Duke, we set the value to Duke and the type to “team”. We can set a table title + subtitle and adjust the fonts, weights, and line-heights of both as well (which we won’t do).</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">gt_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://andreweatherman.github.io/cbbplotR/reference/gt_cbb_logo_title.html">gt_cbb_logo_title</a></span><span class="op">(</span></span>
<span>  title <span class="op">=</span> <span class="st">'Game-by-game efficiency performance for Duke in ACC play | 2023-24'</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">'D1 vs. D1 only. Data, rankings, and quadrants are through the end of the 2023-24 season.'</span>,</span>
<span>  value <span class="op">=</span> <span class="st">'Duke'</span>,</span>
<span>  type <span class="op">=</span> <span class="st">'team'</span></span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="coloring-wl" class="level3"><h3 class="anchored" data-anchor-id="coloring-wl">Coloring W/L</h3>
<p><code>cbbplotR</code> ships with another utility function, <code>gt_color_results</code>, that will take a column of game results — either W/L characters or 1/0 binaries — and fill each row relative to the game result. It’s a tidy way of replicating two tab_style calls in a single line. You can also adjust the win/loss_color (fill) and the wins/loss_text_color. By default, the font color is white, which we will keep.</p>
</section><section id="setting-the-table-font" class="level3"><h3 class="anchored" data-anchor-id="setting-the-table-font">Setting the table font</h3>
<p>The final <code>cbbplotR</code> utility function is <code>gt_set_font</code>, which is a quick and dirty way of changing the font in all customizable parts of your table. You’ll notice that we will still use tab_style to adjust the weights of our column labels, however, and it should be noted that gt_set_font does not yet offer customization aside from changing the font family. You can think of it as a nice way to test different fonts in your table.</p>
</section><section id="building-the-table" class="level3"><h3 class="anchored" data-anchor-id="building-the-table">Building the table</h3>
<p>Now that we have briefly explored each <code>cbbplotR</code> function, created our table header, and finalized our data, let’s throw it over to <code>gt</code>!</p>
<p>Okay, there’s a lot going on here. If you’re relatively new to <code>gt</code>, I really recommend that you step through each line. It might seem overwhelming, but many of the functions are intuitively named, and running the code line-by-line should help you understand what’s happening.</p>
<section id="optional-css" class="level4"><h4 class="anchored" data-anchor-id="optional-css">Optional CSS</h4>
<p>I’m not going to walk through every function, but I did want to briefly mention the <code>opt_css</code> line at the end. opt_css is a way of adding CSS to your tables, which really extends table possibilities. In fact, <code>gt</code> is just converting everything to HTML — which is why we can get some neat customization with our table header.</p>
<p>In our table, specifically, we use this CSS to decrease the spacing between each footnote and our caption lines. To make this work, we need to set a table ID, which we do in the second line with <code>gt(id = 'duke')</code> and then reference that ID as a selector.</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">table_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/gt.html">gt</a></span><span class="op">(</span>id <span class="op">=</span> <span class="st">'duke'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_theme_538.html">gt_theme_538</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/fmt_markdown.html">fmt_markdown</a></span><span class="op">(</span><span class="va">opp</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_move.html">cols_move</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">opp</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_move_to_end.html">cols_move_to_end</a></span><span class="op">(</span><span class="va">quad</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_hide.html">cols_hide</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">rank</span>, <span class="va">net</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html">cols_align</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'center'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_align.html">cols_align</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">opp</span>, <span class="st">'left'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/cols_label.html">cols_label</a></span><span class="op">(</span>opp <span class="op">=</span> <span class="st">'opponent (KenPom Rk.)'</span>, off_ppp <span class="op">=</span> <span class="st">'PPP'</span>, </span>
<span>             def_ppp <span class="op">=</span> <span class="st">'PPP'</span>,off_efg <span class="op">=</span> <span class="st">'eFG%'</span>, off_to <span class="op">=</span> <span class="st">'TOV%'</span>, </span>
<span>             off_or <span class="op">=</span> <span class="st">'Reb%'</span>,off_ftr <span class="op">=</span> <span class="st">'FTA/FGA'</span>, def_efg <span class="op">=</span> <span class="st">'eFG%'</span>,</span>
<span>             def_to <span class="op">=</span> <span class="st">'TOV%'</span>, def_or <span class="op">=</span> <span class="st">'Reb%'</span>, def_ftr <span class="op">=</span> <span class="st">'FTA/FGA'</span>,</span>
<span>             game_score <span class="op">=</span> <span class="st">'Eff. Score'</span>, quad <span class="op">=</span> <span class="st">'NET Quad'</span>,</span>
<span>             closest_rank <span class="op">=</span> <span class="st">'Like #'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://andreweatherman.github.io/cbbplotR/reference/gt_color_results.html">gt_color_results</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_style.html">tab_style</a></span><span class="op">(</span>locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_column_labels.html">cells_column_labels</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            style <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cell_text.html">cell_text</a></span><span class="op">(</span>font <span class="op">=</span> <span class="st">'Oswald'</span>, weight <span class="op">=</span> <span class="st">'bold'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_style.html">tab_style</a></span><span class="op">(</span>locations <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/cells_title.html">cells_title</a></span><span class="op">(</span><span class="op">)</span>, style <span class="op">=</span></span>
<span>              <span class="fu"><a href="https://gt.rstudio.com/reference/cell_text.html">cell_text</a></span><span class="op">(</span>font <span class="op">=</span> <span class="st">'Oswald'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_options.html">tab_options</a></span><span class="op">(</span>table.font.names <span class="op">=</span> <span class="st">'Oswald'</span>, data_row.padding <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_add_divider.html">gt_add_divider</a></span><span class="op">(</span><span class="va">score</span>, include_labels <span class="op">=</span> <span class="cn">FALSE</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_add_divider.html">gt_add_divider</a></span><span class="op">(</span><span class="va">off_ftr</span>, include_labels <span class="op">=</span> <span class="cn">FALSE</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://jthomasmock.github.io/gtExtras/reference/gt_add_divider.html">gt_add_divider</a></span><span class="op">(</span><span class="va">def_ftr</span>, include_labels <span class="op">=</span> <span class="cn">FALSE</span>, color <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span><span class="va">off_ppp</span><span class="op">:</span><span class="va">off_ftr</span>, label <span class="op">=</span> <span class="st">'Offensive Performance'</span>,</span>
<span>              id <span class="op">=</span> <span class="st">'offense'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_spanner.html">tab_spanner</a></span><span class="op">(</span><span class="va">def_ppp</span><span class="op">:</span><span class="va">def_ftr</span>, label <span class="op">=</span> <span class="st">'Defensive Performance'</span>,</span>
<span>              id <span class="op">=</span> <span class="st">'defense'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html">tab_footnote</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/cells_column_spanners.html">cells_column_spanners</a></span><span class="op">(</span>spanner <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'offense'</span>, <span class="st">'defense'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>               footnote <span class="op">=</span> <span class="st">"Points per possession + 'Four Factors'</span></span>
<span><span class="st">               (effective FG%, turnover rate, off/def rebound rate,</span></span>
<span><span class="st">               and FTA per 100 FGA)"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html">tab_footnote</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/cells_column_labels.html">cells_column_labels</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">game_score</span><span class="op">)</span>,</span>
<span>               footnote <span class="op">=</span> <span class="st">'This value is used to calculate the</span></span>
<span><span class="st">               proceeding column and can be viewed as a [0-100]</span></span>
<span><span class="st">               composite game performance score'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_footnote.html">tab_footnote</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/cells_column_labels.html">cells_column_labels</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="va">closest_rank</span><span class="op">)</span>,</span>
<span>               footnote <span class="op">=</span> <span class="st">'This game performance is roughly</span></span>
<span><span class="st">               equivalent to how #X would be expected to play in the</span></span>
<span><span class="st">               same game (Barttorvik)'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_header.html">tab_header</a></span><span class="op">(</span>title <span class="op">=</span> <span class="fu"><a href="https://gt.rstudio.com/reference/html.html">html</a></span><span class="op">(</span><span class="va">gt_title</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/tab_source_note.html">tab_source_note</a></span><span class="op">(</span><span class="fu"><a href="https://gt.rstudio.com/reference/md.html">md</a></span><span class="op">(</span><span class="st">'Data by cbbdata + cbbplotR</span></span>
<span><span class="st">                     &lt;br&gt;Viz. + Analysis by @andreweatherman'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://gt.rstudio.com/reference/opt_css.html">opt_css</a></span><span class="op">(</span></span>
<span>    <span class="st">'</span></span>
<span><span class="st">      #duke .gt_sourcenote{</span></span>
<span><span class="st">        line-height: 1.2;</span></span>
<span><span class="st">        padding-top: 9px !important;</span></span>
<span><span class="st">      }</span></span>
<span><span class="st">      #duke .gt_footnote {</span></span>
<span><span class="st">        padding-top: 7px !important;</span></span>
<span><span class="st">        padding-bottom: 7px !important;</span></span>
<span><span class="st">        line-height: 0.2;</span></span>
<span><span class="st">      }</span></span>
<span><span class="st">      '</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section></section></section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/www\.quantumjitter\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="andreweatherman/viz-site" data-repo-id="R_kgDOL912qA" data-category="Comments" data-category-id="" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light_high_contrast" data-lang="en" crossorigin="anonymous" data-loading="lazy" async="">
</script><input type="hidden" id="giscus-base-theme" value="light_high_contrast"><input type="hidden" id="giscus-alt-theme" value="dark_dimmed">
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Published with <a href="https://quarto.org/">Quarto</a> v1.4.554</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p><a href="https://twitter.com/andreweatherman"><span class="citation" data-cites="andreweatherman">@andreweatherman</span> on Twitter</a> || Template by Carl Goodwin</p>
</div>
  </div>
</footer>


<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>